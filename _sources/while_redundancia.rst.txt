#############
Codi duplicat
#############

El codi que tenim ara està prou bé, però presenta un cert inconvenient:
duplica la petició dels valors.

Recorda el codi:

.. code-block:: java
    :linenos:

    public class SumaPositius {
        public static void main(String[] args) {

            int suma = 0;
            int valor;

            // demana el primer valor
            System.out.println("Introdueix valor");
            valor = Integer.parseInt(Entrada.readLine());

            // ves sumant mentre el valor sigui positiu
            while (valor >= 0) {
                suma = suma + valor;
                // demana un nou valor
                System.out.println("Introdueix valor");
                valor = Integer.parseInt(Entrada.readLine());
            }

            // mostrem el resultat
            System.out.println("La suma és " + suma);
        }
    }

Com podem observar, les línies 8 i 9 són idèntiques a les 15 i 16. D'això
se'n diu *codi redundant* i és quelcom que hem de defugir doncs són una
font de problemes. Per exemple, pensa que et cal canviar el missatge per
demanar el següent valor. Et caldrà modificar-ho en dos llocs. En aquest
codi tan reduït és fàcil però, creu-me, no sempre ho serà tant.

Per poder eliminar la redundància, una manera molt típica és inicialitzar
la variable ``valor`` a un valor que faci que la condició del ``while``
sigui certa la primera vegada, però que no es faci servir.

El codi vindria a ser quelcom similar a:

.. code-block:: java
    :linenos:

    public class SumaPositius {
        public static void main(String[] args) {
            int suma = 0;
            int valor = 0;
            while (valor >= 0) {
                System.out.println("Introdueix valor");
                valor = Integer.parseInt(Entrada.readLine());
                if (valor >= 0) {
                    suma = suma + valor;
                }
            }
            System.out.println("La suma és " + suma);
        }
    }

Fixa't que ara la redundància està en que fem dos cops la mateixa pregunta
(al ``while`` i al ``if``) Sovint, com en aquest cas, ens tocarà decidir
entre dolent i menys dolent.

De moment no et capfiquis gaire. Simplement tingues en compte aquest petit
*truc* de posar un valor de mentida per entrar la primera vegada al bloc
del bucle, doncs és **molt** típic.

|exerciseicon__T| :doc:`exercici_12_04_quantsparells`

